<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIHIO VISUALS // DIGITAL AGENCY</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Space+Mono:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'hw-black': '#050505',
                        'signal-blue': '#0299e1',
                        'noise-red': '#ef4444',
                        'glass-black': 'rgba(10, 10, 10, 0.6)',
                    },
                    fontFamily: {
                        'sans': ['Inter', 'sans-serif'],
                        'mono': ['Space Mono', 'monospace'],
                    },
                    spacing: {
                        '128': '32rem',
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #050505;
            color: #e5e5e5;
            cursor: crosshair;
            overflow-x: hidden;
            width: 100%;
            position: relative;
            transform: none;
            perspective: none;
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: #050505; 
        }
        ::-webkit-scrollbar-thumb {
            background: #333; 
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #0299e1; 
        }

        /* Utilities */
        .glass-panel {
            background: rgba(10, 10, 10, 0.6);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(2, 153, 225, 0.1);
        }
        
        .glass-panel:hover,
        .glass-panel.mobile-active {
            border-color: rgba(2, 153, 225, 0.4);
            box-shadow: 0 0 15px rgba(2, 153, 225, 0.1);
            transform: scale(1.02);
        }

        .corner-bracket {
            position: absolute;
            width: 10px;
            height: 10px;
            border: 1px solid transparent;
            transition: all 0.3s ease;
        }

        .group:hover .corner-bracket-tl,
        .group.mobile-active .corner-bracket-tl {
            top: -1px; left: -1px;
            border-top-color: #0299e1;
            border-left-color: #0299e1;
            width: 20px; height: 20px;
        }
        .group:hover .corner-bracket-tr,
        .group.mobile-active .corner-bracket-tr {
            top: -1px; right: -1px;
            border-top-color: #0299e1;
            border-right-color: #0299e1;
            width: 20px; height: 20px;
        }
        .group:hover .corner-bracket-bl,
        .group.mobile-active .corner-bracket-bl {
            bottom: -1px; left: -1px;
            border-bottom-color: #0299e1;
            border-left-color: #0299e1;
            width: 20px; height: 20px;
        }
        .group:hover .corner-bracket-br,
        .group.mobile-active .corner-bracket-br {
            bottom: -1px; right: -1px;
            border-bottom-color: #0299e1;
            border-right-color: #0299e1;
            width: 20px; height: 20px;
        }

        .scan-line {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, transparent 50%, rgba(0,0,0,0.5) 51%);
            background-size: 100% 4px;
            pointer-events: none;
            z-index: 50;
            opacity: 0.1;
        }

        /* Blinking cursor for typing effect */
        .cursor-blink {
            animation: blink 1s step-end infinite;
        }
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }

        /* 3D Carousel Variables */
        :root {
            --carousel-tz: 350px;
        }
        @media (min-width: 768px) {
            :root {
                --carousel-tz: 400px;
            }
        }

        /* 3D Carousel */
        .carousel-scene {
            perspective: 1000px;
        }
        .carousel-container {
            transform-style: preserve-3d;
            transition: transform 1s cubic-bezier(0.25, 1, 0.5, 1);
        }
        .carousel-face {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(10, 10, 10, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
        }
        .carousel-face:hover {
            border-color: rgba(2, 153, 225, 0.5);
            box-shadow: 0 0 30px rgba(2, 153, 225, 0.1);
        }

        /* Cyberpunk Mobile Menu Links */
        .cyber-link {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            padding: 1rem 1.5rem;
            background: rgba(2, 153, 225, 0.05);
            border: 1px solid rgba(2, 153, 225, 0.3);
            color: #0299e1;
            font-family: 'Space Mono', monospace;
            font-size: 1.1rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            clip-path: polygon(0 0, 100% 0, 100% 70%, 95% 100%, 0 100%);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            text-decoration: none; /* Ensure no underline */
        }
        
        .cyber-link:hover, .cyber-link.active {
            background: rgba(2, 153, 225, 0.15);
            border-color: #0299e1;
            box-shadow: 0 0 15px rgba(2, 153, 225, 0.2);
            padding-left: 2rem;
        }

        .cyber-link.active {
            background: rgba(2, 153, 225, 0.25);
            border-color: #0299e1;
        }

        /* Decorative lines on right */
        .cyber-lines {
            display: flex;
            flex-direction: column;
            gap: 2px;
            opacity: 0.5;
        }
        .cyber-lines span {
            width: 12px;
            height: 2px;
            background: #0299e1;
            transition: width 0.3s ease;
        }
        .cyber-link:hover .cyber-lines span:nth-child(2) { width: 20px; }
        .cyber-link:hover .cyber-lines span:nth-child(1) { width: 8px; }

        /* Glitch Effects */
        @keyframes glitch-skew {
            0% { transform: skew(0deg) translate(0); }
            20% { transform: skew(-10deg) translate(-2px, 2px); }
            40% { transform: skew(10deg) translate(2px, -2px); }
            60% { transform: skew(-5deg) translate(-1px, 1px); }
            80% { transform: skew(5deg) translate(1px, -1px); }
            100% { transform: skew(0deg) translate(0); }
        }
        @keyframes glitch-flash {
            0% { opacity: 1; }
            50% { opacity: 0.7; color: #fff; }
            100% { opacity: 1; }
        }
        
        .glitch-active {
            animation: glitch-skew 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) both infinite;
            border-color: #fff !important;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.5) !important;
        }
        .glitch-active .cyber-text {
            animation: glitch-flash 0.1s steps(2) infinite;
            text-shadow: 2px 0 #fff, -2px 0 #0299e1;
        }

        /* --- Diagonal Wipe Menu Animation --- */
        #mobile-menu-overlay {
            position: fixed;
            inset: 0;
            z-index: 100; /* Boosted to cover navbar/scanlines */
            pointer-events: none;
            visibility: hidden;
            transition: visibility 0s linear 0.8s;
        }

        #mobile-menu-overlay.open {
            visibility: visible;
            pointer-events: auto;
            transition-delay: 0s;
        }

        /* Background that fades in behind the stripes */
        .menu-bg {
            position: absolute;
            inset: 0;
            background: rgba(5, 5, 5, 0.95);
            backdrop-filter: blur(10px);
            opacity: 0;
            transition: opacity 0.3s ease;
            transition-delay: 0.2s;
        }

        #mobile-menu-overlay.open .menu-bg {
            opacity: 1;
        }

        /* Expanding Cyan Stripes */
        .stripe-container {
            display: none; /* Removed old styles */
        }
        .cyan-stripe { display: none; }

        /* Content Fade In */
        #mobile-menu-content {
            opacity: 0;
            transform: scale(0.95);
            transition: opacity 0.4s ease, transform 0.4s ease;
        }

        #mobile-menu-overlay.open #mobile-menu-content {
            opacity: 1;
            transform: scale(1);
            transition-delay: 0.6s; /* Wait for bars to shrink */
        }

        /* --- 3-Part Diagonal Reveal Animation (Refined) --- */
        
        /* 
           Logic: 
           1. Bars are solid #050505 to prevent seams during animation.
           2. On Open: Bars slide in -> Glass Background fades in on top -> Bars hidden?
              Actually, to avoid the "jump" on close, let's keep the bars visible and just overlay the glass?
              If glass is transparent, we see the bars.
              
              User wants "see through".
              So the solid bars MUST fade out after opening to reveal the glass+site.
              And on close, they MUST fade in before sliding away.
        */

        /* Container for the background bars */
        .reveal-container {
            position: absolute;
            inset: 0;
            overflow: hidden;
            z-index: 10;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        /* Background that fades in behind/over the stripes */
        .menu-bg {
            position: absolute;
            inset: 0;
            background: rgba(5, 5, 5, 0.92);
            backdrop-filter: blur(20px);
            opacity: 0;
            transition: opacity 0.3s ease; /* Faster fade in */
            z-index: 5;
        }

        /* Open State Final */
        #mobile-menu-overlay.open .menu-bg {
            opacity: 1;
            transition-delay: 0.4s; /* Start earlier */
        }
        
        /* When open, fade out the solid bars to reveal the glass? 
           If we do this, the close animation needs to handle the reverse.
        */
        #mobile-menu-overlay.open .reveal-container {
            opacity: 0;
            transition-delay: 0.8s; /* Wait until glass is ready */
        }

        .reveal-bar {
            position: absolute;
            left: -150%; /* Centered wider bar */
            width: 400%; /* Massive width to cover corners */
            height: 150%; /* Tall enough */
            background: #050505; /* Solid black for clean wipe */
            transform-origin: center;
            will-change: transform;
        }

        /* Top Bar: Starts above */
        .reveal-bar.top {
            top: -50%;
            height: 100%; /* Big overlap */
            transform: rotate(-45deg) translateY(-100%);
            z-index: 12;
        }

        /* Middle Bar */
        .reveal-bar.middle {
            top: 0;
            left: -150%;
            height: 100%;
            width: 400%;
            transform: rotate(-45deg) scaleY(0);
            z-index: 11;
        }

        /* Bottom Bar: Starts below */
        .reveal-bar.bottom {
            bottom: -50%;
            height: 100%;
            transform: rotate(-45deg) translateY(100%);
            z-index: 12;
        }

        /* --- Open Animations --- */
        @keyframes open-top {
            to { transform: rotate(-45deg) translateY(0); }
        }
        @keyframes open-middle {
            to { transform: rotate(-45deg) scaleY(0.34); } /* 34% is roughly 1/3 */
        }
        @keyframes open-bottom {
            to { transform: rotate(-45deg) translateY(0); }
        }

        #mobile-menu-overlay.open .reveal-bar.top {
            animation: open-top 0.6s cubic-bezier(0.7, 0, 0.3, 1) forwards;
        }
        #mobile-menu-overlay.open .reveal-bar.middle {
            animation: open-middle 0.6s cubic-bezier(0.7, 0, 0.3, 1) forwards;
        }
        #mobile-menu-overlay.open .reveal-bar.bottom {
            animation: open-bottom 0.6s cubic-bezier(0.7, 0, 0.3, 1) forwards;
        }

        /* --- Close Animations --- */
        /* 
           Crucial: On close, we remove .open class.
           1. .reveal-container opacity goes back to 1 (transition).
           2. Animations reverse.
           We need the opacity to come back FAST so we don't see the site flash.
        */
        #mobile-menu-overlay:not(.open) .reveal-container {
            opacity: 1;
            transition-duration: 0.05s; /* Instant reappear */
            transition-delay: 0s;
        }
        #mobile-menu-overlay:not(.open) .menu-bg {
            opacity: 0;
            transition-delay: 0s;
        }

        @keyframes close-top {
            from { transform: rotate(-45deg) translateY(0); }
            to { transform: rotate(-45deg) translateY(-100%); }
        }
        @keyframes close-middle {
            from { transform: rotate(-45deg) scaleY(0.34); }
            to { transform: rotate(-45deg) scaleY(0); }
        }
        @keyframes close-bottom {
            from { transform: rotate(-45deg) translateY(0); }
            to { transform: rotate(-45deg) translateY(100%); }
        }

        #mobile-menu-overlay:not(.open) .reveal-bar.top {
            animation: close-top 0.5s cubic-bezier(0.7, 0, 0.3, 1) forwards;
        }
        #mobile-menu-overlay:not(.open) .reveal-bar.middle {
            animation: close-middle 0.5s cubic-bezier(0.7, 0, 0.3, 1) forwards;
        }
        #mobile-menu-overlay:not(.open) .reveal-bar.bottom {
            animation: close-bottom 0.5s cubic-bezier(0.7, 0, 0.3, 1) forwards;
        }

        /* Content Fade */
        #mobile-menu-content {
            opacity: 0;
            transition: opacity 0.3s ease;
            transition-delay: 0s;
        }
        #mobile-menu-overlay.open #mobile-menu-content {
            opacity: 1;
            transition-delay: 0.4s; /* Wait for bars to connect */
        }

        /* --- X Close Button Animation (Specific Vectors) --- */
        .x-line {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 24px;
            height: 2px;
            background: white;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55); /* Back-out easing for snap */
            opacity: 0;
        }

        /* 
           Line 1: Top-Left to Bottom-Right.
           Start: Offscreen Top-Left (-100px, -100px) 
        */
        .x-line-1 {
            transform: translate(-150%, -400%) rotate(45deg);
        }

        /* 
           Line 2: Top-Right to Bottom-Left.
           Start: Offscreen Top-Right (100px, -100px) 
        */
        .x-line-2 {
            transform: translate(50%, -400%) rotate(-45deg);
        }

        #mobile-menu-btn.open .x-line {
            opacity: 1;
        }

        /* End State: Perfect Center X */
        #mobile-menu-btn.open .x-line-1 {
            transform: translate(-50%, -50%) rotate(45deg);
            transition-delay: 0.6s;
        }
        #mobile-menu-btn.open .x-line-2 {
            transform: translate(-50%, -50%) rotate(-45deg);
            transition-delay: 0.7s;
        }
        
        /* Hamburger Exit */
        #mobile-menu-btn.open .hamburger-line {
            transform: scale(0);
            opacity: 0;
            transition: all 0.2s ease; /* Quick exit */
        }

        /* Hamburger Entry (Default state) */
        .hamburger-line {
            transition: all 0.3s cubic-bezier(0.25, 1.5, 0.5, 1); /* Bouncy entry */
            transition-delay: 0.6s; /* Wait for X to finish closing */
        }

        #mobile-menu-btn.open .hamburger-line {
             transition-delay: 0s; /* No delay on exit */
        }

        /* Hologram Button Mobile */
        .hologram-btn {
            position: relative;
            padding: 1rem 2rem;
            font-family: 'Space Mono', monospace;
            font-weight: 600;
            color: #fff;
            background: rgba(2, 153, 225, 0.05);
            border: 1px solid rgba(2, 153, 225, 0.5);
            box-shadow: 0 0 15px rgba(2, 153, 225, 0.2);
            backdrop-filter: blur(5px);
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            transition: all 0.4s ease;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .hologram-btn span {
            position: relative;
            display: inline-block;
            text-shadow: 0 0 8px rgba(2, 153, 225, 0.5);
        }

        .hologram-btn span::before,
        .hologram-btn span::after {
            content: attr(data-text);
            position: absolute;
            left: 0;
            opacity: 0;
            filter: blur(1px);
            transition: all 0.3s ease;
        }

        .hologram-btn span::before {
            top: -2px;
            color: #ef4444;
            transform: translateX(0);
            animation: holo-glitch 2s infinite;
        }

        .hologram-btn span::after {
            bottom: -2px;
            color: #0299e1;
            transform: translateX(0);
            animation: holo-glitch 2s infinite reverse;
        }

        .hologram-btn:hover {
            background: rgba(2, 153, 225, 0.15);
            border-color: #0299e1;
            box-shadow: 0 0 25px rgba(2, 153, 225, 0.4);
            transform: translateY(-1px);
        }

        .hologram-btn:hover span::before,
        .hologram-btn:hover span::after {
            opacity: 0.6;
            animation-duration: 0.5s;
        }

        .holo-scan-line {
            position: absolute;
            width: 100%;
            height: 2px;
            background: linear-gradient(
                to right,
                transparent,
                rgba(2, 153, 225, 0.8),
                transparent
            );
            top: 0;
            animation: holo-scan 2s linear infinite;
            filter: blur(1px);
            pointer-events: none;
        }

        @keyframes holo-glitch {
            0%, 100% { transform: translateX(0); opacity: 0.3; }
            20% { transform: translateX(-2px); opacity: 0.5; }
            40% { transform: translateX(2px); opacity: 0.7; }
            60% { transform: translateX(-1px); opacity: 0.5; }
            80% { transform: translateX(1px); opacity: 0.3; }
        }

        @keyframes holo-scan {
            0% { top: -10%; }
            100% { top: 110%; }
        }
    </style>
  <script type="module" crossorigin src="/aihio/assets/index-DYyspF46.js"></script>
</head>
<body class="overflow-x-hidden selection:bg-signal-blue selection:text-hw-black">

    <!-- Canvas Layer -->
    <canvas id="grid-static" class="fixed inset-0 z-0 pointer-events-none"></canvas>
    <canvas id="grid-active" class="fixed inset-0 z-0 pointer-events-none"></canvas>

    <!-- Global Overlay / Vignette / Scanlines -->
    <div class="fixed inset-0 z-50 pointer-events-none bg-[radial-gradient(circle_at_center,transparent_0%,rgba(5,5,5,0.1)_100%)]"></div>
    <!-- <div class="scan-line fixed inset-0 z-50"></div> -->

    <!-- HUD Corners -->
    <div class="fixed top-0 left-0 z-50 p-6 pointer-events-none hidden md:block">
        <div class="w-16 h-16 border-l border-t border-white/20 relative">
            <div class="absolute -top-[1px] -left-[1px] w-2 h-2 bg-signal-blue shadow-[0_0_10px_#0299e1]"></div>
        </div>
        <div class="mt-2 font-mono text-[10px] text-signal-blue/80 tracking-widest">SYS.RDY</div>
    </div>

    <!-- Static Loader Curtain -->
    <div id="initial-loader" style="position: fixed; inset: 0; background-color: #050505; z-index: 10000;"></div>

    <div id="root" class="absolute inset-0 pointer-events-none"></div>
        <div class="w-16 h-16 border-r border-t border-white/20 relative">
            <div class="absolute -top-[1px] -right-[1px] w-2 h-2 bg-signal-blue"></div>
        </div>
        <div class="mt-2 font-mono text-[10px] text-white/40 tracking-widest">NET: SECURE</div>
    </div>
    <div class="fixed bottom-0 left-0 z-50 p-6 pointer-events-none flex flex-col-reverse hidden md:flex">
        <div class="w-16 h-16 border-l border-b border-white/20 relative">
            <div class="absolute -bottom-[1px] -left-[1px] w-2 h-2 bg-white/20"></div>
        </div>
        <div class="mb-2 font-mono text-[10px] text-white/40 tracking-widest flex gap-4">
            <span id="fps-counter">FPS: 60</span>
            <span id="latency-counter">LAT: 12ms</span>
        </div>
    </div>
    <div class="fixed bottom-0 right-0 z-50 p-6 pointer-events-none flex flex-col-reverse items-end hidden md:flex">
        <div class="w-16 h-16 border-r border-b border-white/20 relative">
            <div class="absolute -bottom-[1px] -right-[1px] w-2 h-2 bg-white/20"></div>
        </div>
        <!-- Fake System Counter -->
        <div class="mb-2 font-mono text-right">
            <div class="text-[10px] text-signal-blue tracking-widest">DATA STREAM</div>
            <div id="sys-counter" class="text-sm text-white/80">00492.8412</div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-[101] border-b border-white/10 bg-hw-black/80 backdrop-blur-sm">
        <div class="container mx-auto px-6 h-16 flex items-center justify-between">
            <div class="flex items-center gap-2">
                <a href="index.html"><img src="/aihio/assets/UUSLOGO-DNujGdY3.png" alt="NEXUS Logo" class="h-10 w-auto"></a>
            </div>
            <div class="hidden md:flex items-center gap-8">
                <a href="index.html" class="font-mono text-xs text-signal-blue transition-colors uppercase tracking-wider">Etusivu</a>
                <a href="palvelut.html" class="font-mono text-xs text-white/60 hover:text-signal-blue transition-colors uppercase tracking-wider">Palvelut</a>
                <a href="portfolio.html" class="font-mono text-xs text-white/60 hover:text-signal-blue transition-colors uppercase tracking-wider">Portfolio</a>
                <a href="tarina.html" class="font-mono text-xs text-white/60 hover:text-signal-blue transition-colors uppercase tracking-wider">Meistä</a>
                <a href="yhteystiedot.html" class="font-mono text-xs text-white/60 hover:text-signal-blue transition-colors uppercase tracking-wider">Ota Yhteyttä</a>
            </div>
            <!-- Desktop Status -->
            <div class="hidden md:block font-mono text-[10px] border border-signal-blue/30 px-2 py-1 text-signal-blue bg-signal-blue/5 rounded">
                STATUS: ONLINE
            </div>
            
            <!-- Mobile Menu Button -->
            <button id="mobile-menu-btn" class="md:hidden text-white p-2 z-50 relative w-10 h-10 flex items-center justify-center">
                <!-- Original Hamburger Lines -->
                <div class="w-6 h-5 flex flex-col justify-between absolute">
                    <span class="hamburger-line w-full h-0.5 bg-white"></span>
                    <span class="hamburger-line w-full h-0.5 bg-white"></span>
                    <span class="hamburger-line w-full h-0.5 bg-white"></span>
                </div>
                <!-- New X Lines for Animation -->
                <span class="x-line x-line-1"></span>
                <span class="x-line x-line-2"></span>
            </button>
        </div>
    </nav>

    <!-- Mobile Status (Yellow Box Area) -->
    <div class="md:hidden absolute top-[72px] right-6 z-30 pointer-events-none">
        <div class="font-mono text-[10px] border border-signal-blue/30 px-2 py-1 text-signal-blue bg-signal-blue/5 rounded backdrop-blur-sm">
            STATUS: ONLINE
        </div>
    </div>

    <!-- Mobile Menu Overlay (3-Part Diagonal Reveal) -->
    <div id="mobile-menu-overlay">
        <!-- Reveal Bars -->
        <div class="reveal-container">
            <div class="reveal-bar top"></div>
            <div class="reveal-bar middle"></div>
            <div class="reveal-bar bottom"></div>
        </div>

        <!-- Background -->
        <div class="menu-bg"></div>

        <!-- Menu Content -->
        <div id="mobile-menu-content" class="absolute inset-0 flex flex-col items-center justify-center z-30 w-full h-full pointer-events-none">
            <!-- Pointer events auto wrapper for links -->
            <div class="flex flex-col gap-4 w-full max-w-xs px-6 pointer-events-auto justify-center items-center h-full">
                <a href="index.html" class="cyber-link active">
                    <span class="cyber-text">ETUSIVU</span>
                    <div class="cyber-lines"><span></span><span></span></div>
                </a>
                <a href="palvelut.html" class="cyber-link">
                    <span class="cyber-text">PALVELUT</span>
                    <div class="cyber-lines"><span></span><span></span></div>
                </a>
                <a href="portfolio.html" class="cyber-link">
                    <span class="cyber-text">PORTFOLIO</span>
                    <div class="cyber-lines"><span></span><span></span></div>
                </a>
                <a href="tarina.html" class="cyber-link">
                    <span class="cyber-text">MEISTÄ</span>
                    <div class="cyber-lines"><span></span><span></span></div>
                </a>
                <a href="yhteystiedot.html" class="cyber-link">
                    <span class="cyber-text">OTA YHTEYTTÄ</span>
                    <div class="cyber-lines"><span></span><span></span></div>
                </a>
            </div>
        </div>
    </div>

    <script>
        const menuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');
        let isMenuOpen = false;

        menuBtn.addEventListener('click', () => {
            isMenuOpen = !isMenuOpen;
            if (isMenuOpen) {
                mobileMenuOverlay.classList.add('open');
                menuBtn.classList.add('open');
                document.body.style.overflow = 'hidden';
            } else {
                mobileMenuOverlay.classList.remove('open');
                menuBtn.classList.remove('open');
                document.body.style.overflow = '';
            }
        });

        // Random Glitch Effect for Mobile Menu
        const cyberLinks = document.querySelectorAll('.cyber-link');
        
        function triggerRandomGlitch() {
            if (!isMenuOpen) {
                setTimeout(triggerRandomGlitch, 1000);
                return;
            }
            
            const randomLink = cyberLinks[Math.floor(Math.random() * cyberLinks.length)];
            if (randomLink) {
                randomLink.classList.add('glitch-active');
                setTimeout(() => {
                    randomLink.classList.remove('glitch-active');
                }, 200 + Math.random() * 300); // 200-500ms duration
            }
            
            // Schedule next glitch
            setTimeout(triggerRandomGlitch, 2000 + Math.random() * 3000); // 2-5s interval
        }
        
        triggerRandomGlitch();

        // Initialize Swiper for Mobile Services
        document.addEventListener('DOMContentLoaded', () => {
            const swiper = new Swiper(".mySwiper", {
                effect: "coverflow",
                grabCursor: true,
                centeredSlides: true,
                slidesPerView: "auto",
                initialSlide: 0, // Start from the first slide (WEB & BRÄNDI)
                coverflowEffect: {
                    rotate: 35,
                    stretch: 0,
                    depth: 100,
                    modifier: 1,
                    slideShadows: false,
                },
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                },
            });
        });
    </script>

    <!-- Main Content -->
    <main class="relative z-10 pt-16 pointer-events-none">
        
        <!-- Hero Section -->
        <section class="min-h-screen flex items-center justify-center relative pb-32 md:pb-40">
            <!-- Duplicate root removed -->
            <div class="container mx-auto px-6 relative z-10 pointer-events-auto">
                <div class="max-w-4xl">
                    <div class="hidden md:flex font-mono text-signal-blue text-sm mb-4 tracking-[0.2em] items-center gap-2">
                        <span class="w-4 h-[1px] bg-signal-blue"></span>
                        TEKNOLOGIA KOHTAA LUOVUUDEN
                    </div>
                    <h1 class="text-5xl md:text-[5rem] font-bold text-white tracking-tight leading-none mb-6">
                        Herätä brändisi eloon <br />
                        <span class="text-transparent bg-clip-text bg-gradient-to-r from-white/50 to-white/10">– joka ulottuvuudessa.</span>
                    </h1>
                    <p class="hidden md:block text-white/90 text-lg md:text-xl max-w-2xl font-light leading-relaxed border-l border-signal-blue/30 pl-6">
                        Emme tee vain mainoksia, luomme elämyksiä. Modernit verkkosivut, elokuvallinen videotuotanto, 3D-animaatiot ja valokuvaus, jotka erottavat sinut massasta.
                    </p>
                    <p class="md:hidden text-white/90 text-lg max-w-2xl font-light leading-relaxed border-l border-signal-blue/30 pl-6">
                        Modernit verkkosivut, valokuvaus ja 3D-tuotannot, jotka erottavat sinut massasta.
                    </p>
                    
                    <div class="mt-12 flex flex-wrap gap-4">
                        <!-- Desktop Button -->
                        <a href="palvelut.html" class="hidden md:inline-flex hologram-btn group w-auto px-12">
                            <span data-text="TUTUSTU PALVELUIHIN">TUTUSTU PALVELUIHIN</span>
                            <div class="holo-scan-line"></div>
                        </a>
                        
                        <!-- Mobile Hologram Button -->
                        <a href="#capabilities" class="md:hidden hologram-btn w-full group">
                            <span data-text="TUTUSTU PALVELUIHIN">TUTUSTU PALVELUIHIN</span>
                            <div class="holo-scan-line"></div>
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Decorative Elements -->
            <div class="absolute bottom-20 left-1/2 -translate-x-1/2 animate-bounce text-white/20">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                    <path d="M12 5v14M5 12l7 7 7-7" />
                </svg>
            </div>
        </section>

        <!-- Mission / About -->
        <section id="mission" class="py-24 md:py-32 relative border-t border-white/5 bg-hw-black/50 backdrop-blur-sm pointer-events-auto">
            <div class="container mx-auto px-6">
                <div class="grid md:grid-cols-2 gap-12 items-center">
                    <div>
                        <h2 class="font-mono text-2xl text-white mb-8 flex items-center gap-3">
                            <span class="text-signal-blue">01.</span> <span class="scramble-target">YDIN</span>
                        </h2>

                        <!-- Mobile Text -->
                        <div class="md:hidden">
                            <p class="text-white/70 text-lg leading-relaxed">
                                Yhdistämme luovan suunnittelun ja teknisen osaamisen. Kun yksi kumppani hoitaa kaiken 3D-kuvista koodiin, brändisi pysyy yhtenäisenä ja säästät aikaa.
                            </p>
                        </div>

                        <!-- Desktop Text -->
                        <div class="hidden md:block space-y-6">
                            <p class="text-white/70 text-lg leading-relaxed">
                                Erottuminen ei vaadi monimutkaisia termejä, vaan selkeyttä ja laatua. Yhdistämme luovan suunnittelun ja vahvan teknisen osaamisen toimivaksi kokonaisuudeksi.
                            </p>
                            <p class="text-white/70 text-lg leading-relaxed">
                                Kun yksi kumppani hoitaa kaiken 3D-kuvista ja videoista nettisivujen koodiin, brändisi pysyy yhtenäisenä. Ei turhaa säätöä usean eri toimiston välillä, vaan yksi selkeä visio ja laadukas lopputulos.
                            </p>
                        </div>
                    </div>
                    <div class="hidden md:block glass-panel p-8 rounded-sm relative overflow-hidden">
                        <div class="absolute top-0 right-0 p-2">
                            <div class="w-2 h-2 bg-noise-red rounded-full animate-pulse"></div>
                        </div>
                        <h3 class="font-mono text-xs text-white/40 mb-6 tracking-widest border-b border-white/10 pb-2">VAHVUUDET</h3>
                        <div class="space-y-3 font-mono text-sm">
                            <div class="flex justify-between text-white/80">
                                <span>VISUAALISUUS</span>
                                <span class="text-signal-blue">PREMIUM</span>
                            </div>
                            <div class="flex justify-between text-white/80">
                                <span>TEKNOLOGIA</span>
                                <span class="text-signal-blue">MODERNI</span>
                            </div>
                            <div class="flex justify-between text-white/80">
                                <span>KÄYTETTÄVYYS</span>
                                <span class="text-signal-blue">HELPPO</span>
                            </div>
                            <div class="flex justify-between text-white/80">
                                <span>EROTTUVUUS</span>
                                <span class="text-signal-blue">TAATTU</span>
                            </div>
                            
                            <div class="mt-6 pt-4 border-t border-white/10">
                                <div class="w-full bg-white/10 h-1 mt-1">
                                    <div class="bg-signal-blue h-full w-full relative overflow-hidden">
                                        <div class="absolute inset-0 bg-white/20 w-full h-full animate-[shimmer_2s_infinite]"></div>
                                    </div>
                                </div>
                                <div class="flex justify-between text-sm text-white/60 mt-2">
                                    <span>LAATU</span>
                                    <span>100%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Capabilities Grid -->
        <section id="capabilities" class="py-24 md:py-32 relative pointer-events-auto">
            <div class="container mx-auto px-6">
                <div class="flex items-end justify-between mb-16 border-b border-white/10 pb-6">
                    <h2 class="font-mono text-2xl text-white flex items-center gap-3">
                        <span class="text-signal-blue">02.</span> <span class="scramble-target">PALVELUT</span>
                    </h2>
                    <div class="font-mono text-xs text-white/40 hidden md:block">
                        deploy_grid_view(true)
                    </div>
                </div>

                <div class="grid hidden md:grid md:grid-cols-3 gap-6">
                    <!-- Card 1 -->
                    <div class="glass-panel p-8 group relative min-h-[240px] md:min-h-[300px] flex flex-col justify-between transition-all duration-300 hover:bg-white/5 cursor-crosshair overflow-hidden">
                        <!-- Background Image -->
                        <div class="absolute inset-0 z-0">
                            <img src="/aihio/assets/floating%20ui%20design-BavJ9ik9.webp" alt="" class="w-full h-full object-cover opacity-20 group-hover:opacity-40 group-[.mobile-active]:opacity-40 transition-opacity duration-500 grayscale group-hover:grayscale-0 group-[.mobile-active]:grayscale-0" />
                            <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent"></div>
                        </div>

                        <!-- Corner Brackets -->
                        <div class="corner-bracket corner-bracket-tl top-0 left-0 border-t border-l border-white/20 z-20"></div>
                        <div class="corner-bracket corner-bracket-tr top-0 right-0 border-t border-r border-white/20 z-20"></div>
                        <div class="corner-bracket corner-bracket-bl bottom-0 left-0 border-b border-l border-white/20 z-20"></div>
                        <div class="corner-bracket corner-bracket-br bottom-0 right-0 border-b border-r border-white/20 z-20"></div>
                        
                        <div class="relative z-10">
                            <div class="w-10 h-10 border border-signal-blue/30 flex items-center justify-center mb-6 text-signal-blue">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="4 17 10 11 4 5"></polyline>
                                    <line x1="12" y1="19" x2="20" y2="19"></line>
                                </svg>
                            </div>
                            <h3 class="text-xl font-bold text-white mb-6 scramble-target">WEB & BRÄNDI</h3>
                            <p class="hidden md:block text-white/50 text-sm leading-relaxed">
                                Modernit verkkosivut ja erottuva yritysilme. Suunnittelemme logot, grafiikat ja responsiiviset sivustot, jotka on optimoitu sekä hakukoneille että käyttäjille.
                            </p>
                            <p class="md:hidden text-white/50 text-sm leading-relaxed">
                                Modernit verkkosivut ja erottuva yritysilme. Logot, grafiikat ja optimoidut sivustot.
                            </p>
                        </div>
                        <div class="font-mono text-[10px] text-signal-blue/50 mt-8">
                            MODULE: DEV
                        </div>
                    </div>

                    <!-- Card 2 -->
                    <div class="glass-panel p-8 group relative min-h-[240px] md:min-h-[300px] flex flex-col justify-between transition-all duration-300 hover:bg-white/5 cursor-crosshair overflow-hidden">
                        <!-- Background Image -->
                        <div class="absolute inset-0 z-0">
                            <img src="/aihio/assets/camera_drone-DPCIcjWj.webp" alt="" class="w-full h-full object-cover opacity-20 group-hover:opacity-40 group-[.mobile-active]:opacity-40 transition-opacity duration-500 grayscale group-hover:grayscale-0 group-[.mobile-active]:grayscale-0" />
                            <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent"></div>
                        </div>

                        <div class="corner-bracket corner-bracket-tl top-0 left-0 border-t border-l border-white/20 z-20"></div>
                        <div class="corner-bracket corner-bracket-tr top-0 right-0 border-t border-r border-white/20 z-20"></div>
                        <div class="corner-bracket corner-bracket-bl bottom-0 left-0 border-b border-l border-white/20 z-20"></div>
                        <div class="corner-bracket corner-bracket-br bottom-0 right-0 border-b border-r border-white/20 z-20"></div>
                        
                        <div class="relative z-10">
                            <div class="w-10 h-10 border border-signal-blue/30 flex items-center justify-center mb-6 text-signal-blue">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <line x1="14.31" y1="8" x2="20.05" y2="17.94"></line>
                                    <line x1="9.69" y1="8" x2="21.17" y2="8"></line>
                                    <line x1="7.38" y1="12" x2="13.12" y2="2.06"></line>
                                    <line x1="9.69" y1="16" x2="3.95" y2="6.06"></line>
                                    <line x1="14.31" y1="16" x2="2.83" y2="16"></line>
                                    <line x1="16.62" y1="12" x2="10.88" y2="21.94"></line>
                                </svg>
                            </div>
                            <h3 class="text-xl font-bold text-white mb-6 scramble-target">KUVAUS & VIDEO</h3>
                            <p class="hidden md:block text-white/50 text-sm leading-relaxed">
                                Elokuvallista laatua maalta ja ilmasta. Tuotamme näyttävät videot, drone-kuvaukset sekä potretti- ja tuotekuvat, jotka nostavat brändisi ammattimaisuuden uudelle tasolle.
                            </p>
                            <p class="md:hidden text-white/50 text-sm leading-relaxed">
                                Elokuvallista laatua maalta ja ilmasta. Mainosvideot, drone-kuvaus ja potretit.
                            </p>
                        </div>
                        <div class="font-mono text-[10px] text-signal-blue/50 mt-8">
                            MODULE: CAPTURE
                        </div>
                    </div>

                    <!-- Card 3 -->
                    <div class="glass-panel p-8 group relative min-h-[240px] md:min-h-[300px] flex flex-col justify-between transition-all duration-300 hover:bg-white/5 cursor-crosshair overflow-hidden">
                        <!-- Background Image -->
                        <div class="absolute inset-0 z-0">
                            <img src="/aihio/assets/3drender-Qb2fcu2m.webp" alt="" class="w-full h-full object-cover opacity-20 group-hover:opacity-40 group-[.mobile-active]:opacity-40 transition-opacity duration-500 grayscale group-hover:grayscale-0 group-[.mobile-active]:grayscale-0" />
                            <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent"></div>
                        </div>

                        <div class="corner-bracket corner-bracket-tl top-0 left-0 border-t border-l border-white/20 z-20"></div>
                        <div class="corner-bracket corner-bracket-tr top-0 right-0 border-t border-r border-white/20 z-20"></div>
                        <div class="corner-bracket corner-bracket-bl bottom-0 left-0 border-b border-l border-white/20 z-20"></div>
                        <div class="corner-bracket corner-bracket-br bottom-0 right-0 border-b border-r border-white/20 z-20"></div>
                        
                        <div class="relative z-10">
                            <div class="w-10 h-10 border border-signal-blue/30 flex items-center justify-center mb-6 text-signal-blue">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="m21.12 6.4-6.05-4.06a2 2 0 0 0-2.17-.05L2.95 8.41a2 2 0 0 0-.95 1.7v5.82a2 2 0 0 0 .88 1.66l6.05 4.07a2 2 0 0 0 2.17.05l9.95-6.12a2 2 0 0 0 .95-1.7V8.06a2 2 0 0 0-.88-1.66Z"/>
                                    <path d="M10 22v-8L2.25 9.15"/>
                                    <path d="m10 14 11.77-6.87"/>
                                </svg>
                            </div>
                            <h3 class="text-xl font-bold text-white mb-6 scramble-target">3D & ANIMAATIO</h3>
                            <p class="hidden md:block text-white/50 text-sm leading-relaxed">
                                Vie mainontasi uudelle tasolle. Luomme fotorealistiset 3D-tuotekuvat ja näyttävät animaatiot, jotka pysäyttävät katseen somessa ja tekevät tuotteestasi tähden.
                            </p>
                            <p class="md:hidden text-white/50 text-sm leading-relaxed">
                                Fotorealistiset 3D-kuvat ja animaatiot, jotka pysäyttävät katseen.
                            </p>
                        </div>
                        <div class="font-mono text-[10px] text-signal-blue/50 mt-8">
                            MODULE: RENDER
                        </div>
                    </div>
                </div>

                <!-- Desktop CTA Button -->
                <div class="mt-16 hidden md:flex justify-center">
                    <a href="palvelut.html" class="hologram-btn px-12 group">
                        <span data-text="KATSO KAIKKI PALVELUT">KATSO KAIKKI PALVELUT</span>
                        <div class="holo-scan-line"></div>
                    </a>
                </div>

                <!-- Mobile Swiper Carousel -->
                <div class="md:hidden w-full py-10 overflow-hidden">
                    <div class="swiper mySwiper !pb-12">
                        <div class="swiper-wrapper">
                            <!-- Slide 1 -->
                            <div class="swiper-slide w-[280px] sm:w-[320px]">
                                <div class="relative h-[400px] rounded-2xl overflow-hidden border border-white/10 bg-hw-black/40 backdrop-blur-md group transition-all duration-300 hover:border-signal-blue/50">
                                    <!-- Glow Effect -->
                                    <div class="absolute inset-0 opacity-20 bg-gradient-to-b from-signal-blue/20 to-transparent pointer-events-none"></div>
                                    
                                    <div class="p-8 h-full flex flex-col justify-between relative z-10">
                                        <div>
                                            <div class="w-16 h-16 rounded-full bg-white/5 flex items-center justify-center mb-6 text-signal-blue shadow-[0_0_15px_rgba(2,153,225,0.3)]">
                                                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                                    <polyline points="4 17 10 11 4 5"></polyline>
                                                    <line x1="12" y1="19" x2="20" y2="19"></line>
                                                </svg>
                                            </div>
                                            <h3 class="text-2xl font-bold text-white mb-3 font-mono tracking-tight scramble-target whitespace-nowrap">WEB & BRÄNDI</h3>
                                            <p class="text-white/60 text-sm leading-relaxed">
                                                Modernit verkkosivut ja erottuva yritysilme. Logot, grafiikat ja optimoidut sivustot.
                                            </p>
                                        </div>
                                        <div class="border-t border-white/10 pt-4 flex justify-between items-center">
                                            <div class="text-xs font-mono text-white/40 tracking-widest">
                                                MODULE: <span class="text-signal-blue">DEV</span>
                                            </div>
                                            <div class="w-8 h-8 rounded-full border border-white/20 flex items-center justify-center text-white/40">
                                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                    <path d="M5 12h14M12 5l7 7-7 7"/>
                                                </svg>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Corner Decors -->
                                    <div class="absolute top-0 left-0 w-2 h-2 border-l border-t border-signal-blue opacity-50"></div>
                                    <div class="absolute top-0 right-0 w-2 h-2 border-r border-t border-signal-blue opacity-50"></div>
                                    <div class="absolute bottom-0 left-0 w-2 h-2 border-l border-b border-signal-blue opacity-50"></div>
                                    <div class="absolute bottom-0 right-0 w-2 h-2 border-r border-b border-signal-blue opacity-50"></div>
                                </div>
                            </div>

                            <!-- Slide 2 -->
                            <div class="swiper-slide w-[280px] sm:w-[320px]">
                                <div class="relative h-[400px] rounded-2xl overflow-hidden border border-white/10 bg-hw-black/40 backdrop-blur-md group transition-all duration-300 hover:border-signal-blue/50">
                                    <!-- Glow Effect -->
                                    <div class="absolute inset-0 opacity-20 bg-gradient-to-b from-signal-blue/20 to-transparent pointer-events-none"></div>
                                    
                                    <div class="p-8 h-full flex flex-col justify-between relative z-10">
                                        <div>
                                            <div class="w-16 h-16 rounded-full bg-white/5 flex items-center justify-center mb-6 text-signal-blue shadow-[0_0_15px_rgba(2,153,225,0.3)]">
                                                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                                    <circle cx="12" cy="12" r="10"></circle>
                                                    <line x1="14.31" y1="8" x2="20.05" y2="17.94"></line>
                                                    <line x1="9.69" y1="8" x2="21.17" y2="8"></line>
                                                    <line x1="7.38" y1="12" x2="13.12" y2="2.06"></line>
                                                    <line x1="9.69" y1="16" x2="3.95" y2="6.06"></line>
                                                    <line x1="14.31" y1="16" x2="2.83" y2="16"></line>
                                                    <line x1="16.62" y1="12" x2="10.88" y2="21.94"></line>
                                                </svg>
                                            </div>
                                            <h3 class="text-2xl font-bold text-white mb-3 font-mono tracking-tight scramble-target whitespace-nowrap">KUVAUS & VIDEO</h3>
                                            <p class="text-white/60 text-sm leading-relaxed">
                                                Elokuvallista laatua maalta ja ilmasta. Mainosvideot, drone-kuvaus ja potretit.
                                            </p>
                                        </div>
                                        <div class="border-t border-white/10 pt-4 flex justify-between items-center">
                                            <div class="text-xs font-mono text-white/40 tracking-widest">
                                                MODULE: <span class="text-signal-blue">CAPTURE</span>
                                            </div>
                                            <div class="w-8 h-8 rounded-full border border-white/20 flex items-center justify-center text-white/40">
                                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                    <path d="M5 12h14M12 5l7 7-7 7"/>
                                                </svg>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Corner Decors -->
                                    <div class="absolute top-0 left-0 w-2 h-2 border-l border-t border-signal-blue opacity-50"></div>
                                    <div class="absolute top-0 right-0 w-2 h-2 border-r border-t border-signal-blue opacity-50"></div>
                                    <div class="absolute bottom-0 left-0 w-2 h-2 border-l border-b border-signal-blue opacity-50"></div>
                                    <div class="absolute bottom-0 right-0 w-2 h-2 border-r border-b border-signal-blue opacity-50"></div>
                                </div>
                            </div>

                            <!-- Slide 3 -->
                            <div class="swiper-slide w-[280px] sm:w-[320px]">
                                <div class="relative h-[400px] rounded-2xl overflow-hidden border border-white/10 bg-hw-black/40 backdrop-blur-md group transition-all duration-300 hover:border-signal-blue/50">
                                    <!-- Glow Effect -->
                                    <div class="absolute inset-0 opacity-20 bg-gradient-to-b from-signal-blue/20 to-transparent pointer-events-none"></div>
                                    
                                    <div class="p-8 h-full flex flex-col justify-between relative z-10">
                                        <div>
                                            <div class="w-16 h-16 rounded-full bg-white/5 flex items-center justify-center mb-6 text-signal-blue shadow-[0_0_15px_rgba(2,153,225,0.3)]">
                                                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                                    <path d="m21.12 6.4-6.05-4.06a2 2 0 0 0-2.17-.05L2.95 8.41a2 2 0 0 0-.95 1.7v5.82a2 2 0 0 0 .88 1.66l6.05 4.07a2 2 0 0 0 2.17.05l9.95-6.12a2 2 0 0 0 .95-1.7V8.06a2 2 0 0 0-.88-1.66Z"/>
                                                    <path d="M10 22v-8L2.25 9.15"/>
                                                    <path d="m10 14 11.77-6.87"/>
                                                </svg>
                                            </div>
                                            <h3 class="text-2xl font-bold text-white mb-3 font-mono tracking-tight scramble-target whitespace-nowrap">3D & ANIMAATIO</h3>
                                            <p class="text-white/60 text-sm leading-relaxed">
                                                Fotorealistiset 3D-kuvat ja animaatiot, jotka pysäyttävät katseen.
                                            </p>
                                        </div>
                                        <div class="border-t border-white/10 pt-4 flex justify-between items-center">
                                            <div class="text-xs font-mono text-white/40 tracking-widest">
                                                MODULE: <span class="text-signal-blue">RENDER</span>
                                            </div>
                                            <div class="w-8 h-8 rounded-full border border-white/20 flex items-center justify-center text-white/40">
                                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                    <path d="M5 12h14M12 5l7 7-7 7"/>
                                                </svg>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Corner Decors -->
                                    <div class="absolute top-0 left-0 w-2 h-2 border-l border-t border-signal-blue opacity-50"></div>
                                    <div class="absolute top-0 right-0 w-2 h-2 border-r border-t border-signal-blue opacity-50"></div>
                                    <div class="absolute bottom-0 left-0 w-2 h-2 border-l border-b border-signal-blue opacity-50"></div>
                                    <div class="absolute bottom-0 right-0 w-2 h-2 border-r border-b border-signal-blue opacity-50"></div>
                                </div>
                            </div>
                        </div>
                        <div class="swiper-pagination"></div>
                    </div>
                    <style>
                        .swiper-pagination-bullet {
                            background: #333;
                            opacity: 1;
                        }
                        .swiper-pagination-bullet-active {
                            background: #0299e1;
                            box-shadow: 0 0 10px #0299e1;
                        }
                        /* Fix swiper overflow clipping */
                        .swiper {
                            overflow: visible !important;
                        }
                    </style>
                    
                    <!-- Mobile CTA Button -->
                    <div class="mt-12 flex justify-center px-4">
                        <a href="palvelut.html" class="hologram-btn w-full group">
                            <span data-text="KATSO KAIKKI PALVELUT">KATSO KAIKKI PALVELUT</span>
                            <div class="holo-scan-line"></div>
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Portfolio Preview / Gear Section -->
        <section id="portfolio-preview" class="py-24 relative overflow-hidden border-t border-white/5 bg-hw-black/50 backdrop-blur-sm pointer-events-auto">
            <div class="container mx-auto px-6 relative z-10">
                <!-- Header -->
                <div class="mb-20 text-center">
                    <div class="font-mono text-signal-blue text-xs mb-4 tracking-[0.2em] uppercase flex items-center justify-center gap-2">
                        <span class="w-4 h-[1px] bg-signal-blue"></span>
                        portfolio module
                        <span class="w-4 h-[1px] bg-signal-blue"></span>
                    </div>
                    <h2 class="text-4xl md:text-6xl font-bold text-white tracking-tight scramble-target">
                    <span>JÄLKI, JOKA</span> <br class="md:hidden" />
                    <span class="text-transparent bg-clip-text bg-gradient-to-r from-white via-white to-white/50">PUHUU <br class="md:hidden" /> PUOLESTAAN.</span>
                </h2>
                </div>

                <!-- 3D Gear Carousel -->
                <div class="relative h-[400px] md:h-[500px] flex items-center justify-center carousel-scene overflow-hidden md:overflow-visible">
                    
                    <!-- Carousel Root -->
                    <!-- Width ~ 300px/400px. Radius ~ 300px -->
                    <div id="gear-carousel" class="carousel-container w-[300px] h-[220px] md:w-[450px] md:h-[300px] relative">
                        
                        <!-- Face 1 -->
                        <div class="carousel-face" style="transform: rotateY(0deg) translateZ(var(--carousel-tz));">
                            <div class="relative w-full h-full overflow-hidden group">
                                <div class="absolute inset-0 bg-gradient-to-b from-transparent to-black/80 z-10"></div>
                                <div class="absolute inset-0 bg-white/5 flex items-center justify-center z-0 text-white/20 font-mono text-4xl">
                                    PROJECT 01
                                </div>
                                <div class="absolute bottom-0 left-0 p-6 z-20 translate-y-4 group-hover:translate-y-0 transition-transform">
                                    <div class="text-signal-blue font-mono text-xs mb-1">CASE STUDY</div>
                                    <div class="text-white font-bold text-xl">NEON HORIZON</div>
                                </div>
                            </div>
                        </div>

                        <!-- Face 2 -->
                        <div class="carousel-face" style="transform: rotateY(60deg) translateZ(var(--carousel-tz));">
                            <div class="relative w-full h-full overflow-hidden group">
                                <div class="absolute inset-0 bg-gradient-to-b from-transparent to-black/80 z-10"></div>
                                <div class="absolute inset-0 bg-white/5 flex items-center justify-center z-0 text-white/20 font-mono text-4xl">
                                    PROJECT 02
                                </div>
                                <div class="absolute bottom-0 left-0 p-6 z-20 translate-y-4 group-hover:translate-y-0 transition-transform">
                                    <div class="text-signal-blue font-mono text-xs mb-1">BRANDING</div>
                                    <div class="text-white font-bold text-xl">CYBER CORE</div>
                                </div>
                            </div>
                        </div>

                        <!-- Face 3 -->
                        <div class="carousel-face" style="transform: rotateY(120deg) translateZ(var(--carousel-tz));">
                            <div class="relative w-full h-full overflow-hidden group">
                                <div class="absolute inset-0 bg-gradient-to-b from-transparent to-black/80 z-10"></div>
                                <div class="absolute inset-0 bg-white/5 flex items-center justify-center z-0 text-white/20 font-mono text-4xl">
                                    PROJECT 03
                                </div>
                                <div class="absolute bottom-0 left-0 p-6 z-20 translate-y-4 group-hover:translate-y-0 transition-transform">
                                    <div class="text-signal-blue font-mono text-xs mb-1">3D MOTION</div>
                                    <div class="text-white font-bold text-xl">KINETIC FLUX</div>
                                </div>
                            </div>
                        </div>

                        <!-- Face 4 -->
                        <div class="carousel-face" style="transform: rotateY(180deg) translateZ(var(--carousel-tz));">
                            <div class="relative w-full h-full overflow-hidden group">
                                <div class="absolute inset-0 bg-gradient-to-b from-transparent to-black/80 z-10"></div>
                                <div class="absolute inset-0 bg-white/5 flex items-center justify-center z-0 text-white/20 font-mono text-4xl">
                                    PROJECT 04
                                </div>
                                <div class="absolute bottom-0 left-0 p-6 z-20 translate-y-4 group-hover:translate-y-0 transition-transform">
                                    <div class="text-signal-blue font-mono text-xs mb-1">WEB DEV</div>
                                    <div class="text-white font-bold text-xl">AERO SPACE</div>
                                </div>
                            </div>
                        </div>

                        <!-- Face 5 -->
                        <div class="carousel-face" style="transform: rotateY(240deg) translateZ(var(--carousel-tz));">
                            <div class="relative w-full h-full overflow-hidden group">
                                <div class="absolute inset-0 bg-gradient-to-b from-transparent to-black/80 z-10"></div>
                                <div class="absolute inset-0 bg-white/5 flex items-center justify-center z-0 text-white/20 font-mono text-4xl">
                                    PROJECT 05
                                </div>
                                <div class="absolute bottom-0 left-0 p-6 z-20 translate-y-4 group-hover:translate-y-0 transition-transform">
                                    <div class="text-signal-blue font-mono text-xs mb-1">VIDEO</div>
                                    <div class="text-white font-bold text-xl">URBAN PULSE</div>
                                </div>
                            </div>
                        </div>

                        <!-- Face 6 -->
                        <div class="carousel-face" style="transform: rotateY(300deg) translateZ(var(--carousel-tz));">
                            <div class="relative w-full h-full overflow-hidden group">
                                <div class="absolute inset-0 bg-gradient-to-b from-transparent to-black/80 z-10"></div>
                                <div class="absolute inset-0 bg-white/5 flex items-center justify-center z-0 text-white/20 font-mono text-4xl">
                                    PROJECT 06
                                </div>
                                <div class="absolute bottom-0 left-0 p-6 z-20 translate-y-4 group-hover:translate-y-0 transition-transform">
                                    <div class="text-signal-blue font-mono text-xs mb-1">VISUALS</div>
                                    <div class="text-white font-bold text-xl">ECHO CHAMBER</div>
                                </div>
                            </div>
                        </div>

                    </div>

                    <!-- Controls -->
                    <div class="absolute inset-0 pointer-events-none flex items-center justify-between container mx-auto px-4 z-20">
                        <button onclick="rotateCarousel(-1)" class="pointer-events-auto w-12 h-12 md:w-16 md:h-16 border border-white/10 hover:border-signal-blue bg-black/50 backdrop-blur flex items-center justify-center text-white hover:text-signal-blue transition-all rounded-full group">
                            <svg class="w-6 h-6 transform group-hover:-translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                        </button>
                        <button onclick="rotateCarousel(1)" class="pointer-events-auto w-12 h-12 md:w-16 md:h-16 border border-white/10 hover:border-signal-blue bg-black/50 backdrop-blur flex items-center justify-center text-white hover:text-signal-blue transition-all rounded-full group">
                            <svg class="w-6 h-6 transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                        </button>
                    </div>
                </div>

                <!-- CTA Button -->
                <div class="mt-20 flex justify-center">
                    <a href="portfolio.html" class="hologram-btn px-12 group">
                        <span data-text="KATSO KOKO PORTFOLIO ->" class="whitespace-nowrap">KATSO KOKO PORTFOLIO -></span>
                        <div class="holo-scan-line"></div>
                    </a>
                </div>
            </div>
        </section>

        <!-- Contact -->
        <section id="contact" class="py-24 relative border-t border-white/5 pointer-events-auto">
            <div class="container mx-auto px-6 text-center">
                <div class="inline-block p-px bg-gradient-to-r from-transparent via-signal-blue/50 to-transparent mb-12">
                    <div class="bg-hw-black px-6 py-2 font-mono text-sm text-signal-blue">
                        YHTEYS AVATTU
                    </div>
                </div>
                
                <h2 class="text-4xl md:text-6xl font-bold text-white mb-8 tracking-tight scramble-target">
                    <span>TEHDÄÄN</span> <br class="md:hidden" />
                    <span class="text-white/30">IDEASTASI TOTTA.</span>
                </h2>
                
                <div class="flex justify-center">
                    <a href="yhteystiedot.html" class="hologram-btn px-12 py-6 group">
                        <span data-text="KÄYNNISTÄ PROJEKTI">KÄYNNISTÄ PROJEKTI</span>
                        <div class="holo-scan-line"></div>
                    </a>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="border-t border-white/10 bg-hw-black relative z-10 pointer-events-auto">
            <div class="container mx-auto px-6 py-16">
                <div class="grid grid-cols-1 md:grid-cols-4 gap-12 mb-12 relative">
                    
                    <!-- Connecting Lines (Desktop Only) -->
                    <div class="hidden md:block absolute inset-0 pointer-events-none">
                        <!-- Vertical lines connecting columns -->
                        <div id="rack-line-1" class="absolute left-1/4 bottom-0 w-px bg-signal-blue/20 transition-all duration-300" style="height: 100%; top: auto;"></div>
                        <div id="rack-line-2" class="absolute left-2/4 bottom-0 w-px bg-signal-blue/20 transition-all duration-300" style="height: 100%; top: auto;"></div>
                        <div id="rack-line-3" class="absolute left-3/4 bottom-0 w-px bg-signal-blue/20 transition-all duration-300" style="height: 100%; top: auto;"></div>
                        
                        <!-- Horizontal lines connecting to headers -->
                        <div class="absolute top-8 left-0 right-0 h-px bg-signal-blue/10"></div>
                        
                        <!-- Activity Blips (Little moving lights) -->
                        <div class="absolute left-1/4 w-px h-8 bg-signal-blue shadow-[0_0_8px_#0299e1] animate-[drop_3s_infinite_ease-in-out]" style="top: -10%;"></div>
                        <div class="absolute left-2/4 w-px h-8 bg-signal-blue shadow-[0_0_8px_#0299e1] animate-[drop_4s_infinite_ease-in-out_1s]" style="top: -10%;"></div>
                        <div class="absolute left-3/4 w-px h-8 bg-signal-blue shadow-[0_0_8px_#0299e1] animate-[drop_2.5s_infinite_ease-in-out_0.5s]" style="top: -10%;"></div>
                    </div>

                    <style>
                        @keyframes drop {
                            0% { top: -10%; opacity: 0; }
                            10% { opacity: 1; }
                            90% { opacity: 1; }
                            100% { top: 110%; opacity: 0; }
                        }
                    </style>

                    <!-- Logo Column -->
                    <div class="flex flex-col relative z-10 group" onmouseenter="activateRackLine(0)" onmouseleave="deactivateRackLine(0)">
                        <a href="index.html" class="mb-6">
                            <img src="/aihio/assets/UUSLOGO-DNujGdY3.png" alt="AIHIO VISUALS Logo" class="h-12 w-auto">
                        </a>
                        <p class="font-mono text-sm text-white mb-2">
                            LUOVA DIGITOIMISTO
                        </p>
                        <p class="font-mono text-xs text-white/40 leading-relaxed">
                            Yhdistämme visuaalisen tarinankerronnan ja modernin teknologian. Luomme brändillesi digitaalisen kodin, joka huomataan.
                        </p>
                    </div>

                    <!-- Navigation Column -->
                    <div class="flex flex-col relative z-10 group" onmouseenter="activateRackLine(1)" onmouseleave="deactivateRackLine(1)">
                        <h3 class="font-mono text-xs text-signal-blue mb-6 tracking-widest border border-signal-blue/30 px-3 py-1 inline-block w-fit">
                            AIHIO
                        </h3>
                        <nav class="flex flex-col gap-3">
                            <a href="index.html" class="font-mono text-xs text-white/60 hover:text-signal-blue transition-colors uppercase tracking-wider border border-transparent hover:border-signal-blue/30 px-3 py-1 w-fit">
                                Etusivu
                            </a>
                            <a href="portfolio.html" class="font-mono text-xs text-white/60 hover:text-signal-blue transition-colors uppercase tracking-wider border border-transparent hover:border-signal-blue/30 px-3 py-1 w-fit">
                                Portfolio
                            </a>
                            <a href="tarina.html" class="font-mono text-xs text-white/60 hover:text-signal-blue transition-colors uppercase tracking-wider border border-transparent hover:border-signal-blue/30 px-3 py-1 w-fit">
                                Tietoa meistä
                            </a>
                            <a href="yhteystiedot.html" class="font-mono text-xs text-white/60 hover:text-signal-blue transition-colors uppercase tracking-wider border border-transparent hover:border-signal-blue/30 px-3 py-1 w-fit">
                                Ota yhteyttä
                            </a>
                            <a href="#" class="font-mono text-xs text-white/60 hover:text-signal-blue transition-colors uppercase tracking-wider border border-transparent hover:border-signal-blue/30 px-3 py-1 w-fit">
                                Tietosuojaseloste
                            </a>
                        </nav>
                    </div>

                    <!-- Services Column -->
                    <div class="flex flex-col relative z-10 group" onmouseenter="activateRackLine(2)" onmouseleave="deactivateRackLine(2)">
                        <h3 class="font-mono text-xs text-signal-blue mb-6 tracking-widest border border-signal-blue/30 px-3 py-1 inline-block w-fit">
                            PALVELUT
                        </h3>
                        <nav class="flex flex-col gap-3">
                            <a href="palvelut.html" class="font-mono text-xs text-white/60 hover:text-signal-blue transition-colors uppercase tracking-wider border border-transparent hover:border-signal-blue/30 px-3 py-1 w-fit">
                                Verkkosivut & Verkkokaupat
                            </a>
                            <a href="palvelut.html" class="font-mono text-xs text-white/60 hover:text-signal-blue transition-colors uppercase tracking-wider border border-transparent hover:border-signal-blue/30 px-3 py-1 w-fit">
                                3D-mallinnus & Renderöinti
                            </a>
                            <a href="palvelut.html" class="font-mono text-xs text-white/60 hover:text-signal-blue transition-colors uppercase tracking-wider border border-transparent hover:border-signal-blue/30 px-3 py-1 w-fit">
                                Videotuotanto & Editointi
                            </a>
                            <a href="palvelut.html" class="font-mono text-xs text-white/60 hover:text-signal-blue transition-colors uppercase tracking-wider border border-transparent hover:border-signal-blue/30 px-3 py-1 w-fit">
                                Valokuvaus & Drone
                            </a>
                            <a href="palvelut.html" class="font-mono text-xs text-white/60 hover:text-signal-blue transition-colors uppercase tracking-wider border border-transparent hover:border-signal-blue/30 px-3 py-1 w-fit">
                                Brändäys & Logot
                            </a>
                        </nav>
                    </div>

                    <!-- Contact Column -->
                    <div class="flex flex-col relative z-10 group" onmouseenter="activateRackLine(3)" onmouseleave="deactivateRackLine(3)">
                        <h3 class="font-mono text-xs text-signal-blue mb-6 tracking-widest border border-signal-blue/30 px-3 py-1 inline-block w-fit">
                            VERKOSSA
                        </h3>
                        <nav class="flex flex-col gap-3">
                            <a href="#" class="font-mono text-xs text-white/60 hover:text-signal-blue transition-colors uppercase tracking-wider border border-transparent hover:border-signal-blue/30 px-3 py-1 w-fit">
                                Instagram
                            </a>
                            <a href="#" class="font-mono text-xs text-white/60 hover:text-signal-blue transition-colors uppercase tracking-wider border border-transparent hover:border-signal-blue/30 px-3 py-1 w-fit">
                                LinkedIn
                            </a>
                            <a href="#" class="font-mono text-xs text-white/60 hover:text-signal-blue transition-colors uppercase tracking-wider border border-transparent hover:border-signal-blue/30 px-3 py-1 w-fit">
                                YouTube
                            </a>
                            <div class="pt-4 flex flex-col gap-2">
                                <a href="mailto:contact@aihio.fi" class="font-mono text-xs text-white/60 hover:text-signal-blue transition-colors border border-transparent hover:border-signal-blue/30 px-3 py-1 w-fit">
                                    contact@aihio.fi
                                </a>
                                <span class="font-mono text-xs text-white/60 px-3 py-1">
                                    +358 40 123 4567
                                </span>
                            </div>
                        </nav>
                    </div>

                </div>

                <!-- Bottom Bar -->
                <div class="border-t border-white/10 pt-6 flex flex-col md:flex-row justify-between items-center gap-4">
                    <div class="font-mono text-xs text-white/40">
                        &copy; 2025 Aihio Visuals. Kaikki oikeudet pidätetään.
                    </div>
                    <div class="font-mono text-xs text-white/40 flex items-center gap-2">
                        <span class="w-2 h-2 bg-signal-blue rounded-full animate-pulse"></span>
                        <span>SYSTEM STATUS: ONLINE</span>
                    </div>
                </div>
            </div>
        </footer>
    </main>

    <script>
        /**
         * CANVAS ANIMATION SYSTEM
         */
        const canvasStatic = document.getElementById('grid-static');
        const ctxStatic = canvasStatic.getContext('2d');
        const canvasActive = document.getElementById('grid-active');
        const ctxActive = canvasActive.getContext('2d');

        let width, height;
        let hexagons = [];
        let hexGrid = []; // 2D array for spatial lookup
        
        // Configuration (will be set in resize)
        let hexRadius = 25;
        let hexHeight, hexWidth, hexXSpacing, hexYSpacing;
        let isMobile = false;

        // Mouse state
        let mouse = { x: -1000, y: -1000 };
        
        // Noise state
        let noiseNodes = [];
        // Ripple state
        let ripples = [];

        // Resize handler
        function resize() {
            width = window.innerWidth;
            height = window.innerHeight;
            isMobile = width < 768;

            // Adjust grid size for mobile
            hexRadius = isMobile ? 40 : 25; // Larger hexes on mobile = fewer draw calls
            hexHeight = hexRadius * Math.sqrt(3);
            hexWidth = hexRadius * 2;
            hexXSpacing = hexWidth * 0.75;
            hexYSpacing = hexHeight;
            
            canvasStatic.width = width;
            canvasStatic.height = height;
            canvasActive.width = width;
            canvasActive.height = height;

            initGrid();
            drawStaticGrid();
        }

        window.addEventListener('resize', resize);
        window.addEventListener('mousemove', (e) => {
            mouse.x = e.clientX;
            mouse.y = e.clientY;
        });

        window.addEventListener('click', (e) => {
            // Find closest hex to click to snap the origin
            let closestHex = null;
            let minDist = Infinity;
            
            // Optimization: Search only if we have hexes
            if (hexagons.length > 0) {
                for (let hex of hexagons) {
                    const dist = Math.hypot(hex.x - e.clientX, hex.y - e.clientY);
                    if (dist < minDist) {
                        minDist = dist;
                        closestHex = hex;
                    }
                }
            }
            
            if (closestHex && ripples.length < 3) {
                ripples.push({
                    x: closestHex.x,
                    y: closestHex.y,
                    radius: 0,
                    speed: isMobile ? 8 : 15, // Slower ripples on mobile
                    maxRadius: Math.max(width, height) * 1.5,
                    life: 1.0,
                    decay: isMobile ? 0.003 : 0.005 // Longer life for slower ripples
                });
            }
        });

        class Hexagon {
            constructor(x, y, row, col) {
                this.x = x;
                this.y = y;
                this.row = row;
                this.col = col;
            }

            draw(ctx, strokeStyle = null, fillStyle = null, lineWidth = 1) {
                ctx.beginPath();
                for (let i = 0; i < 6; i++) {
                    const angle = Math.PI / 3 * i;
                    const hx = this.x + hexRadius * Math.cos(angle);
                    const hy = this.y + hexRadius * Math.sin(angle);
                    if (i === 0) ctx.moveTo(hx, hy);
                    else ctx.lineTo(hx, hy);
                }
                ctx.closePath();
                
                if (fillStyle) {
                    ctx.fillStyle = fillStyle;
                    ctx.fill();
                }
                if (strokeStyle) {
                    ctx.strokeStyle = strokeStyle;
                    ctx.lineWidth = lineWidth;
                    ctx.stroke();
                }
            }
        }

        function initGrid() {
            hexagons = [];
            hexGrid = [];
            const rows = Math.ceil(height / hexYSpacing) + 1;
            const cols = Math.ceil(width / hexXSpacing) + 1;

            for (let c = 0; c < cols; c++) {
                hexGrid[c] = [];
                for (let r = 0; r < rows; r++) {
                    let x = c * hexXSpacing;
                    let y = r * hexYSpacing;
                    if (c % 2 === 1) {
                        y += hexYSpacing / 2;
                    }
                    const hex = new Hexagon(x, y, r, c);
                    hexagons.push(hex);
                    hexGrid[c][r] = hex;
                }
            }
        }

        function drawStaticGrid() {
            ctxStatic.clearRect(0, 0, width, height);
            ctxStatic.strokeStyle = 'rgba(255, 255, 255, 0.03)';
            ctxStatic.lineWidth = 1;
            
            hexagons.forEach(hex => {
                hex.draw(ctxStatic, 'rgba(255, 255, 255, 0.03)');
            });
        }

        function getDistance(h1, h2) {
            return Math.sqrt(Math.pow(h1.x - h2.x, 2) + Math.pow(h1.y - h2.y, 2));
        }

        function animate() {
            ctxActive.clearRect(0, 0, width, height);
            ctxActive.globalCompositeOperation = 'lighter';

            // 1. Find closest hex to mouse
            let closestHex = null;
            let minDist = Infinity;
            
            // Search optimization: could filter by coordinates, but O(N) is fine for < 2000 hexes
            for (let hex of hexagons) {
                const dist = Math.hypot(hex.x - mouse.x, hex.y - mouse.y);
                if (dist < minDist) {
                    minDist = dist;
                    closestHex = hex;
                }
            }

            // 2. Draw Active Signal (Mouse)
            if (closestHex && minDist < 200) { // Only show if mouse is somewhat on screen/active
                
                // Glow Radius Logic
                const glowRadius = 100; // Radius for faint glow
                
                // Find and draw glowing neighbors
                hexagons.forEach(h => {
                    const d = Math.hypot(h.x - mouse.x, h.y - mouse.y);
                    if (d < glowRadius) {
                        // Calculate intensity based on distance (1.0 at center, 0.0 at radius edge)
                        const intensity = 1 - (d / glowRadius);
                        const alpha = intensity * 0.4; // Max opacity 0.4
                        
                        if (h === closestHex) {
                            // Main active hex gets special treatment
                            ctxActive.shadowBlur = 20;
                            ctxActive.shadowColor = '#0299e1';
                            h.draw(ctxActive, '#0299e1', 'rgba(2, 153, 225, 0.3)', 2);
                            ctxActive.shadowBlur = 0;
                        } else {
                            // Neighbors get a faint glow
                            h.draw(ctxActive, `rgba(2, 153, 225, ${alpha})`, `rgba(2, 153, 225, ${alpha * 0.1})`, 1);
                        }
                    }
                });
            }

            // 3. Handle Noise (Random red flashes)
            // Chance to add new noise - reduced on mobile
            const noiseChance = isMobile ? 0.005 : 0.02;
            if (Math.random() < noiseChance) { 
                const randomHex = hexagons[Math.floor(Math.random() * hexagons.length)];
                noiseNodes.push({
                    hex: randomHex,
                    opacity: 1.0,
                    life: 1.0,
                    decay: 0.005
                });
            }

            // Render and update noise nodes
            for (let i = noiseNodes.length - 1; i >= 0; i--) {
                let n = noiseNodes[i];
                
                ctxActive.shadowBlur = 10 * n.opacity;
                ctxActive.shadowColor = '#ef4444';
                
                const stroke = `rgba(239, 68, 68, ${n.opacity})`;
                const fill = `rgba(239, 68, 68, ${n.opacity * 0.1})`;
                
                n.hex.draw(ctxActive, stroke, fill, 1);
                
                n.life -= n.decay;
                n.opacity = n.life; // Linear fade

                if (n.life <= 0) {
                    noiseNodes.splice(i, 1);
                }
            }

            // 4. Handle Ripples
            for (let i = ripples.length - 1; i >= 0; i--) {
                let r = ripples[i];
                r.radius += r.speed;
                r.life -= r.decay;

                if (r.life <= 0 || r.radius > r.maxRadius) {
                    ripples.splice(i, 1);
                    continue;
                }

                // Draw ripple effect
                const bandWidth = 50; // Narrower waves (was 150)
                const outerRadius = r.radius + bandWidth;
                const innerRadius = Math.max(0, r.radius - bandWidth);

                // Optimization: Spatial Lookup
                // Determine column range based on ripple X bounds
                const minCol = Math.max(0, Math.floor((r.x - outerRadius) / hexXSpacing));
                const maxCol = Math.min(hexGrid.length - 1, Math.ceil((r.x + outerRadius) / hexXSpacing));

                for (let c = minCol; c <= maxCol; c++) {
                    // For each column, determine row range based on ripple Y bounds
                    if (!hexGrid[c]) continue;
                    
                    const minRow = Math.max(0, Math.floor((r.y - outerRadius) / hexYSpacing));
                    const maxRow = Math.min(hexGrid[c].length - 1, Math.ceil((r.y + outerRadius) / hexYSpacing));

                    for (let row = minRow; row <= maxRow; row++) {
                        const h = hexGrid[c][row];
                        if (!h) continue;

                        // Perform precise distance check
                        const dist = Math.hypot(h.x - r.x, h.y - r.y);
                        const distFromWave = Math.abs(dist - r.radius);
                        
                        if (distFromWave < bandWidth) {
                            const intensity = 1 - (distFromWave / bandWidth);
                            const alpha = intensity * r.life * 0.8;
                            
                            if (alpha > 0.05) {
                                const stroke = `rgba(2, 153, 225, ${alpha})`;
                                const fill = `rgba(2, 153, 225, ${alpha * 0.15})`;
                                h.draw(ctxActive, stroke, fill, 2);
                            }
                        }
                    }
                }
            }
            ctxActive.shadowBlur = 0;

            requestAnimationFrame(animate);
        }

        // Initialize
        resize();
        animate();


        /**
         * SYSTEM COUNTER LOGIC
         */
        const counterEl = document.getElementById('sys-counter');
        const fpsEl = document.getElementById('fps-counter');
        const latEl = document.getElementById('latency-counter');
        
        // Random data stream update
        setInterval(() => {
            const val = (Math.random() * 1000).toFixed(4);
            counterEl.innerText = `00${val}`;
        }, 100);

        // Fake FPS update (fluctuate around 60)
        setInterval(() => {
            const fps = 58 + Math.floor(Math.random() * 3);
            fpsEl.innerText = `FPS: ${fps}`;
        }, 1000);
        
        // Fake Latency update
        setInterval(() => {
            const lat = 10 + Math.floor(Math.random() * 15);
            latEl.innerText = `LAT: ${lat}ms`;
        }, 2000);

        /**
         * CAROUSEL LOGIC
         */
        let currentAngle = 0;
        window.rotateCarousel = function(direction) {
            currentAngle += direction * -60;
            const carousel = document.getElementById('gear-carousel');
            if(carousel) {
                carousel.style.transform = `rotateY(${currentAngle}deg)`;
            }
        }

        /**
         * CAROUSEL DRAG & CLICK LOGIC
         */
        const scene = document.querySelector('.carousel-scene');
        let startX = 0;
        let isDragging = false;
        let startTime = 0;

        if (scene) {
            // Touch
            scene.addEventListener('touchstart', (e) => {
                startX = e.touches[0].clientX;
                isDragging = true;
                startTime = Date.now();
            });
            
            scene.addEventListener('touchend', (e) => {
                if (!isDragging) return;
                const endX = e.changedTouches[0].clientX;
                handleGesture(startX, endX, e.target);
                isDragging = false;
            });

            // Mouse
            scene.addEventListener('mousedown', (e) => {
                startX = e.clientX;
                isDragging = true;
                startTime = Date.now();
            });

            scene.addEventListener('mouseup', (e) => {
                if (!isDragging) return;
                const endX = e.clientX;
                handleGesture(startX, endX, e.target);
                isDragging = false;
            });
            
            scene.addEventListener('mouseleave', () => {
                isDragging = false;
            });
        }

        function handleGesture(start, end, target) {
            const diff = start - end;
            const threshold = 50; // px for swipe
            const timeElapsed = Date.now() - startTime;

            // Swipe
            if (Math.abs(diff) > threshold) {
                if (diff > 0) {
                    // Swipe Left -> Next
                    window.rotateCarousel(1);
                } else {
                    // Swipe Right -> Prev
                    window.rotateCarousel(-1);
                }
                return;
            }

            // Click (if short duration and little movement)
            if (timeElapsed < 300 && Math.abs(diff) < 10) {
                // Check if we clicked a face (or child of face)
                const face = target.closest('.carousel-face');
                if (face) {
                    const rect = face.getBoundingClientRect();
                    const faceCenter = rect.left + rect.width / 2;
                    const sceneRect = scene.getBoundingClientRect();
                    const sceneCenter = sceneRect.left + sceneRect.width / 2;

                    // Define a "center zone" width where we consider it the active face
                    const centerZone = 100; 

                    if (faceCenter > sceneCenter + centerZone/2) {
                        // Clicked right side
                        window.rotateCarousel(1);
                    } else if (faceCenter < sceneCenter - centerZone/2) {
                        // Clicked left side
                        window.rotateCarousel(-1);
                    }
                }
            }
        }

        /**
         * MOBILE SCROLL ACTIVATE LOGIC
         */
        function handleMobileScroll() {
            // Only run on mobile
            if (window.innerWidth >= 768) {
                // Clean up just in case resized
                document.querySelectorAll('#capabilities .glass-panel').forEach(el => {
                    el.classList.remove('mobile-active');
                });
                return;
            }

            const panels = document.querySelectorAll('#capabilities .glass-panel');
            const viewCenter = window.innerHeight / 2;
            let closestPanel = null;
            let minDist = Infinity;

            panels.forEach(panel => {
                const rect = panel.getBoundingClientRect();
                const panelCenter = rect.top + rect.height / 2;
                const dist = Math.abs(viewCenter - panelCenter);

                // Check if panel is even visible in viewport (roughly)
                if (dist < window.innerHeight / 2) {
                    if (dist < minDist) {
                        minDist = dist;
                        closestPanel = panel;
                    }
                }
                
                // Reset
                panel.classList.remove('mobile-active');
            });

            if (closestPanel) {
                closestPanel.classList.add('mobile-active');
            }
        }

        // Throttle scroll event
        let scrollTimeout;
        window.addEventListener('scroll', () => {
            if (scrollTimeout) return;
            scrollTimeout = setTimeout(() => {
                handleMobileScroll();
                scrollTimeout = null;
            }, 100); // 100ms throttle
        });

        // Initial check
        handleMobileScroll();

    </script>
</body>
</html>
